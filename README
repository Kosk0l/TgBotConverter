Примерный план:

1. Есть бд, где хранятся id пользователей, ник, etc

2. Пользователь делает запрос, в запросе идет его id, файл, состояние, мы даем ответ мол "во что перевести".

3. Пользователь дает ответ, тем временем файл лежит в редисе например. 
Далее мы его конвертируем и отправляем обратно нужному айдишнику. В редис учитываем таймер ответа.
Типа пользователь отправил файл, в течении 5 минут должен дать ответ во что конвертировать, иначе сбросить операцию.